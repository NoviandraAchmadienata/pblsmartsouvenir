<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel</title>
    <link rel="stylesheet" href="admin.style.css">
</head>

<body>
    <div class="admin-wrapper">
        <nav class="sidebar">
            <h2 class="logo">Smart Souvenir (Admin)</h2>
            <ul>
                <li class="active" data-page="reports">Reports</li>
                <li data-page="products">Products & Tags</li>
                <li data-page="inventory">Inventory</li>
                <li data-page="discounts">Discounts</li>
                <li id="logout-btn">Logout</li>
            </ul>
        </nav>

        <main class="admin-content">
            <div id="reports-page" class="page active-page">
                <div class="header">
                    <h1>Sales Report</h1>
                </div>
                <div class="report-section content-box">
                    <h2>Filter Reports</h2>
                    <label for="report-period">Select Period:</label>
                    <select id="report-period">
                        <option value="daily">Today</option>
                        <option value="weekly">Last 7 Days</option>
                        <option value="monthly">Last 30 Days</option>
                        <option value="yearly">Last 365 Days</option>
                        <option value="custom">Custom Date Range</option>
                        <option value="all">All Time</option>
                    </select>
                    <div id="custom-date-range">
                        <label for="start-date">Start Date:</label>
                        <input type="date" id="start-date">
                        <label for="end-date">End Date:</label>
                        <input type="date" id="end-date">
                    </div>
                    <button id="get-report-btn">Get Report</button>
                    <div id="report-results"></div>
                </div>
            </div>

            <div id="products-page" class="page">
                <div class="header">
                    <h1>Manage Products</h1>
                </div>
                <div class="two-column-layout">
                    <div class="form-section content-box">
                        <h2>Define New Product</h2>
                        <label for="new-prod-name">Product Name:</label>
                        <input type="text" id="new-prod-name" placeholder="e.g., Kaos">
                        <label for="new-prod-price">Product Price (Rp):</label>
                        <input type="number" id="new-prod-price" placeholder="e.g., 88000" step="1">
                        <button id="add-product-btn">Add Product</button>
                    </div>
                    <div class="form-section content-box">
                        <h2>Register New Tag</h2>
                        <label for="prod-select-dropdown">1. Select Product:</label>
                        <select id="prod-select-dropdown">
                            <option value="">Loading...</option>
                        </select>
                        <label for="prod-uid">2. Scan RFID Tag:</label>
                        <input type="text" id="prod-uid" placeholder="UID will appear here upon scan...">
                        <button id="register-tag-btn">Register Tag</button>
                    </div>
                </div>
                <div class="content-box" style="margin-top: 20px;">
                    <h2>Existing Products</h2>
                    <!-- BARU: Bilah pencarian untuk produk -->
                    <div class="form-section" style="margin-bottom: 20px;">
                        <input type="text" id="product-search-input" placeholder="Search products by name...">
                    </div>
                    <div id="existing-products-list"></div>
                </div>
            </div>

            <div id="inventory-page" class="page">
                <div class="header">
                    <h1>Inventory</h1>
                </div>
                <div class="content-box" style="margin-bottom: 20px;">
                    <h2>Settings</h2>
                    <div class="form-section" style="display: flex; align-items: center; gap: 15px;">
                        <label for="low-stock-threshold" style="margin-bottom: 0; margin-top: 0;">Low Stock Threshold:</label>
                        <input type="number" id="low-stock-threshold" style="width: 100px; margin-bottom: 0;">
                        <button id="save-inventory-settings-btn">Save Settings</button>
                    </div>
                </div>
                <div class="content-box">
                    <div class="stock-header">
                        <h2>Inventory Summary</h2>
                        <!-- BARU: Pindahkan bilah pencarian ke sini -->
                        <div class="uid-search-inline">
                            <input type="text" id="inventory-uid-search-input" placeholder="Search by Product Name or UID...">
                            <button id="inventory-uid-search-btn">Search</button>
                        </div>
                    </div>
                    <div id="inventory-list-container">
                        <p>Loading inventory data...</p>
                    </div>
                </div>
            </div>

            <div id="discounts-page" class="page">
                <div class="header">
                    <h1>Discount Management</h1>
                </div>
                <div class="content-box">
                    <h2>Create New Discount Rule</h2>
                    <div class="form-section two-column-layout">
                        <div>
                            <label for="discount-name">Discount Name</label>
                            <input type="text" id="discount-name" placeholder="e.g., Promo Akhir Tahun">
                            <label for="discount-type">Discount Type</label>
                            <select id="discount-type">
                                <option value="global">Global (All Products)</option>
                                <option value="product">Specific Product</option>
                            </select>
                            <div id="discount-product-selector-div" class="hidden">
                                <label for="discount-product-selector">Select Product</label>
                                <select id="discount-product-selector"></select>
                            </div>
                        </div>
                        <div>
                            <label for="discount-percentage">Percentage (%)</label>
                            <input type="number" id="discount-percentage" placeholder="10" min="0" max="100">
                            <label for="discount-start-date">Start Date (Optional)</label>
                            <input type="date" id="discount-start-date">
                            <label for="discount-end-date">End Date (Optional)</label>
                            <input type="date" id="discount-end-date">
                        </div>
                        <button id="create-discount-btn">Create Discount Rule</button>
                    </div>
                </div>
                <div class="content-box" style="margin-top: 20px;">
                    <h2>Existing Discount Rules</h2>
                    <div id="existing-discounts-list"></div>
                </div>
            </div>

        </main>

        <div id="uid-modal" class="modal-overlay hidden">
            <div class="modal-content">
                <span class="modal-close-btn">&times;</span>
                <h2 id="modal-product-name">Product Name</h2>
                <p>List of all active (unsold) RFID UIDs for this product:</p>
                <input type="text" id="uid-search-input" placeholder="Search for a UID...">
                <div id="modal-uid-list" class="uid-list-box">
                </div>
            </div>
        </div>

        <div id="edit-product-modal" class="modal-overlay hidden">
            <div class="modal-content">
                <span class="modal-close-btn">&times;</span>
                <h2>Edit Product</h2>
                <input type="hidden" id="edit-product-id">
                <div class="form-section">
                    <label for="edit-product-name">Product Name:</label>
                    <input type="text" id="edit-product-name">
                    <label for="edit-product-price">Product Price (Rp):</label>
                    <input type="number" id="edit-product-price" step="1">
                    <button id="save-product-changes-btn">Save Changes</button>
                </div>
            </div>
        </div>

        <!-- MODAL BARU: Untuk Registrasi Tag RFID Cepat -->
        <div id="register-tag-modal" class="modal-overlay hidden">
            <div class="modal-content">
                <span class="modal-close-btn">&times;</span>
                <h2>Register Tag for <span id="register-modal-product-name"></span></h2>
                <input type="hidden" id="register-modal-product-id">
                <div class="form-section">
                    <label for="register-modal-uid">Scan RFID Tag:</label>
                    <input type="text" id="register-modal-uid" placeholder="UID will appear here...">
                    <button id="register-modal-btn">Register This Tag</button>
                    <div id="register-modal-status" class="register-status-box"></div>
                </div>
            </div>
        </div>

        <!-- MODAL ALERT KUSTOM BARU -->
        <div id="custom-alert-modal" class="modal-overlay hidden">
            <div class="modal-content alert-modal-content">
                <p id="custom-alert-message"></p>
                <button id="custom-alert-close-btn">OK</button>
            </div>
        </div>

        <!-- MODAL CONFIRM KUSTOM BARU -->
        <div id="custom-confirm-modal" class="modal-overlay hidden">
            <div class="modal-content confirm-modal-content">
                <p id="custom-confirm-message"></p>
                <div class="modal-actions">
                    <button id="custom-confirm-cancel-btn" class="modal-btn-secondary">Cancel</button>
                    <button id="custom-confirm-ok-btn" class="modal-btn-danger">Confirm</button>
                </div>
            </div>
        </div>

    </div>
    <script src="admin.app.js"></script>
</body>

</html>