<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel Admin</title> 
    <link rel="stylesheet" href="admin.style.css"> 
</head>

<body>
    <div class="admin-wrapper">
        <nav class="sidebar">
            <h2 class="logo">Smart Souvenir (Admin)</h2>
            <ul>
                <li class="active" data-page="reports">Laporan</li>
                <li data-page="products">Produk & Tag</li>
                <li data-page="inventory">Inventaris</li>
                <li data-page="discounts">Diskon</li>
                <li id="logout-btn">Keluar</li>
            </ul>
        </nav>

        <main class="admin-content">
            <div id="reports-page" class="page active-page">
                <div class="header">
                    <h1>Laporan Penjualan</h1>
                </div>
                <div class="report-section content-box">
                    <h2>Filter Laporan</h2>
                    <label for="report-period">Pilih Periode:</label>
                    <select id="report-period">
                        <option value="daily">Hari Ini</option>
                        <option value="weekly">7 Hari Terakhir</option>
                        <option value="monthly">30 Hari Terakhir</option>
                        <option value="yearly">365 Hari Terakhir</option>
                        <option value="custom">Rentang Tanggal Kustom</option>
                        <option value="all">Sepanjang Waktu</option>
                    </select>
                    <div id="custom-date-range">
                        <label for="start-date">Tanggal Mulai:</label>
                        <input type="date" id="start-date">
                        <label for="end-date">Tanggal Akhir:</label>
                        <input type="date" id="end-date">
                    </div>
                    <button id="get-report-btn">Dapatkan Laporan</button>
                    <div id="report-results"></div>
                </div>
            </div>

            <div id="products-page" class="page">
                <div class="header">
                    <h1>Kelola Produk</h1>
                </div>
                <div class="two-column-layout">
                    <div class="form-section content-box">
                        <h2>Definisikan Produk Baru</h2>
                        <label for="new-prod-name">Nama Produk:</label>
                        <input type="text" id="new-prod-name" placeholder="contoh: Kaos">
                        <label for="new-prod-price">Harga Produk (Rp):</label>
                        <input type="number" id="new-prod-price" placeholder="e.g., 88000" step="1">
                        <button id="add-product-btn">Tambah Produk</button>
                    </div>
                    <div class="form-section content-box">
                        <h2>Daftarkan Tag Baru</h2>
                        <label for="prod-select-dropdown">1. Pilih Produk:</label>
                        <select id="prod-select-dropdown">
                            <option value="">Memuat...</option>
                        </select>
                        <label for="prod-uid">2. Pindai Tag RFID:</label>
                        <input type="text" id="prod-uid" placeholder="UID akan muncul di sini setelah dipindai...">
                        <button id="register-tag-btn">Daftarkan Tag</button>
                    </div>
                </div>
                <div class="content-box" style="margin-top: 20px;">
                    <h2>Produk yang Ada</h2>
                    <!-- BARU: Bilah pencarian untuk produk -->
                    <div class="form-section" style="margin-bottom: 20px;">
                        <input type="text" id="product-search-input" placeholder="Cari produk berdasarkan nama...">
                    </div>
                    <div id="existing-products-list"></div>
                </div>
            </div>

            <div id="inventory-page" class="page">
                <div class="header">
                    <h1>Inventaris</h1>
                </div>
                <div class="content-box" style="margin-bottom: 20px;">
                    <h2>Pengaturan</h2>
                    <div class="form-section" style="display: flex; align-items: center; gap: 15px;">
                        <label for="low-stock-threshold" style="margin-bottom: 0; margin-top: 0;">Ambang Batas Stok Rendah:</label>
                        <input type="number" id="low-stock-threshold" style="width: 100px; margin-bottom: 0;">
                        <button id="save-inventory-settings-btn">Simpan Pengaturan</button>
                    </div>
                </div>
                <div class="content-box">
                    <div class="stock-header">
                        <h2>Ringkasan Inventaris</h2>
                        <!-- BARU: Pindahkan bilah pencarian ke sini -->
                        <div class="uid-search-inline">
                            <input type="text" id="inventory-uid-search-input" placeholder="Cari berdasarkan Nama Produk atau UID...">
                            <button id="inventory-uid-search-btn">Cari</button>
                        </div>
                    </div>
                    <div id="inventory-list-container">
                        <p>Memuat data inventaris...</p>
                    </div>
                </div>
            </div>

            <div id="discounts-page" class="page">
                <div class="header">
                    <h1>Manajemen Diskon</h1>
                </div>
                <div class="content-box">
                    <h2>Buat Aturan Diskon Baru</h2>
                    <div class="form-section two-column-layout">
                        <div>
                            <label for="discount-name">Nama Diskon</label>
                            <input type="text" id="discount-name" placeholder="contoh: Promo Akhir Tahun">
                            <label for="discount-type">Tipe Diskon</label>
                            <select id="discount-type">
                                <option value="global">Global (Semua Produk)</option>
                                <option value="product">Produk Spesifik</option>
                            </select>
                            <div id="discount-product-selector-div" class="hidden">
                                <label for="discount-product-selector">Pilih Produk</label>
                                <select id="discount-product-selector"></select>
                            </div>
                        </div>
                        <div>
                            <label for="discount-percentage">Persentase (%)</label>
                            <input type="number" id="discount-percentage" placeholder="10" min="0" max="100">
                            <label for="discount-start-date">Tanggal Mulai (Opsional)</label>
                            <input type="date" id="discount-start-date">
                            <label for="discount-end-date">Tanggal Akhir (Opsional)</label>
                            <input type="date" id="discount-end-date">
                        </div>
                        <button id="create-discount-btn">Buat Aturan Diskon</button>
                    </div>
                </div>
                <div class="content-box" style="margin-top: 20px;">
                    <h2>Aturan Diskon yang Ada</h2>
                    <div id="existing-discounts-list"></div>
                </div>
            </div>

        </main>

        <div id="uid-modal" class="modal-overlay hidden">
            <div class="modal-content">
                <span class="modal-close-btn">&times;</span>
                <h2 id="modal-product-name">Nama Produk</h2>
                <p>Daftar semua UID RFID aktif (belum terjual) untuk produk ini:</p>
                <input type="text" id="uid-search-input" placeholder="Cari UID...">
                <div id="modal-uid-list" class="uid-list-box">
                </div>
            </div>
        </div>

        <div id="edit-product-modal" class="modal-overlay hidden">
            <div class="modal-content">
                <span class="modal-close-btn">&times;</span>
                <h2>Edit Produk</h2>
                <input type="hidden" id="edit-product-id">
                <div class="form-section">
                    <label for="edit-product-name">Nama Produk:</label>
                    <input type="text" id="edit-product-name">
                    <label for="edit-product-price">Harga Produk (Rp):</label>
                    <input type="number" id="edit-product-price" step="1">
                    <button id="save-product-changes-btn">Save Changes</button>
                </div>
            </div>
        </div>

        <!-- MODAL BARU: Untuk Registrasi Tag RFID Cepat -->
        <div id="register-tag-modal" class="modal-overlay hidden">
            <div class="modal-content">
                <span class="modal-close-btn">&times;</span>
                <h2>Daftarkan Tag untuk <span id="register-modal-product-name"></span></h2>
                <input type="hidden" id="register-modal-product-id">
                <div class="form-section">
                    <label for="register-modal-uid">Pindai Tag RFID:</label>
                    <input type="text" id="register-modal-uid" placeholder="UID akan muncul di sini...">
                    <button id="register-modal-btn">Daftarkan Tag Ini</button>
                    <div id="register-modal-status" class="register-status-box"></div>
                </div>
            </div>
        </div>

        <!-- MODAL ALERT KUSTOM BARU -->
        <div id="custom-alert-modal" class="modal-overlay hidden">
            <div class="modal-content alert-modal-content">
                <p id="custom-alert-message"></p>
                <button id="custom-alert-close-btn">OK</button>
            </div>
        </div>

        <!-- MODAL CONFIRM KUSTOM BARU -->
        <div id="custom-confirm-modal" class="modal-overlay hidden">
            <div class="modal-content confirm-modal-content">
                <p id="custom-confirm-message"></p>
                <div class="modal-actions">
                    <button id="custom-confirm-cancel-btn" class="modal-btn-secondary">Batal</button>
                    <button id="custom-confirm-ok-btn" class="modal-btn-danger">Konfirmasi</button>
                </div>
            </div>
        </div>

    </div>
    <script type="module" src="admin.app.js"></script> 
</body>

</html>